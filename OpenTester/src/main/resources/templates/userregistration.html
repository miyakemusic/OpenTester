<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<title>Login Page</title>
   
	<link th:href="@{/webjars/bootstrap/5.1.0/css/bootstrap.min.css}" rel="stylesheet" type="text/css" />
    <script th:src="@{/webjars/jquery/3.6.4/jquery.min.js}"></script>
    <script th:src="@{/webjars/bootstrap/5.1.0/js/bootstrap.min.js}"></script>
</head>
<body style="padding-top:5rem">
<div th:insert="~{/header}"></div>  
<h2 class="form-signin-heading" th:text="#{label.form.title}">form</h2>

<div class="container" th:if="${user.username != ''}">
<form th:action="${resource}" th:object="${user}" method="POST" enctype="utf8">
	<div class="fs-1">
	<span>Hello, </span>
	<span th:text="${user.username}"></span>
	</div>
	    <div>
	        <input class="form-control" type="hidden" th:field="*{code}" th:value="${code}" />
	        <p th:each="error : ${#fields.errors('code')}" 
	          th:text="${error}">Validation error</p>
	    </div>

	    <div>
	        <input class="form-control" type="hidden" th:field="*{username}" th:value="${username}" />
	        <p th:each="error : ${#fields.errors('username')}" 
	          th:text="${error}">Validation error</p>
	    </div>
	    
	    <div th:if="${onlyPassword != true}">
		    <div>
		        <label th:text="#{label.user.firstName}">first</label>
		        <input class="form-control" th:field="*{firstName}" th:value="${firstName}"/>
		        <p th:each="error: ${#fields.errors('firstName')}" 
		          th:text="${error}">Validation error</p>
		    </div>
		    <div>
		        <label th:text="#{label.user.lastName}">last</label>
		        <input class="form-control" th:field="*{lastName}" th:value="${lastName}" />
		        <p th:each="error : ${#fields.errors('lastName')}" 
		          th:text="${error}">Validation error</p>
		    </div>
	    </div>
	    <div>
	        <label th:text="#{label.user.password}">password</label>
	        <input class="form-control" type="password" th:field="*{password}"/>
	        <p th:each="error : ${#fields.errors('password')}" 
	          th:text="${error}">Validation error</p>
	    </div>
	   
	    <div>
	        <label th:text="#{label.user.confirmPass}">confirm</label>
	        <input class="form-control"  type="password" th:field="*{matchingPassword}"/>
	    </div>
		<div class="alert alert-danger" role="alert" th:if="${passwordNotMatch == true}">Password is not matched!</div>
	    <button class="btn btn-lg btn-primary btn-block" type="submit" th:text="#{label.form.submit}">submit</button>
	</form>
</div>
<div th:if="${user.username == ''}">
<div class="alert alert-danger" role="alert">
  Error! The code may be expired.
</div>
</div>
</body>
</html>